---
title: "Learning SQL through PostgreSQL in R"
author: "Shannon Pileggi"
date: 2018-10-26
categories: ["R"]
tags: ["PostgreSQL", "R", "SQL", "data science"]
draft: true
---



<div id="overview" class="section level1">
<h1>Overview</h1>
<p><code>SQL</code> is general programming language utilized to navigate relational databases, and it is a hot keyword in so many data science job ads today. If you are in the data science job market, chances are you might encounter some of the following:</p>
<ol style="list-style-type: decimal">
<li>A verbal mini-quiz on SQL syntax.</li>
<li>A whiteboard exercise to write SQL code.</li>
<li>A take-home SQL challenge to complete.</li>
</ol>
<p>If you didn’t learn SQL as part of your curriculum or on the job, how can you demonstrate to your employer that you are worthy? There are many online courses and materials you can use to learn the basics, but to ace an interview you really need to achieve mastery. Below are a SQL quiz and a take home assignment to help prep you. Still feeling out of depth? Head down to the SQL playground.</p>
</div>
<div id="the-quiz" class="section level1">
<h1>The quiz</h1>
</div>
<div id="the-take-home-assignment" class="section level1">
<h1>The take home assignment</h1>
<p>HelpScout recently posted <a href="https://gist.github.com/mattm/c011078dfc3f1feb3d8767a4425dd7d8">this challenge</a> as part of its application process for a Data Analyst position. The creator, <a href="https://mattmazur.com/about/">Matt Mazur</a>, says it should take 10-15 minutes for an intermediate SQL programmer to complete! Give it an honest attempt, no matter how long it takes you. When you’re ready, check out <a href="https://mattmazur.com/2018/11/12/analyzing-89-responses-to-a-sql-screener-question-for-a-senior-data-analyst-position/">Matt’s review</a> of the submitted solutions.</p>
</div>
<div id="the-sql-playground" class="section level1">
<h1>The SQL playground</h1>
<p>Different flavors of SQL can be used with different databases. R is rapidly expanding its infrastructure to connect with a variety of databases, and the <a href="https://db.rstudio.com/">Databases using R</a> site is quite comprehensive. For this demo, we’ll use the free and open source database <a href="https://www.postgresql.org/">PostgreSQL</a>, and we’ll follow Hadley Wickham’s <a href="https://r4ds.had.co.nz">R for Data Science</a> chapter on <a href="https://r4ds.had.co.nz/relational-data.html">relational databases</a>. I encourage you to use your own data that motivates you, and build your own <a href="https://caitlinhudon.com/2018/11/28/git-sql-together/">SQL library</a> as recommended by <a href="">Caitlin Hudon</a>.</p>
<div id="installations" class="section level2">
<h2>Installations</h2>
<p>To get started <a href="https://www.postgresql.org/download/">download PostgreSQL</a>, and be sure to remember the password you established. We’re also going to use the R packages of <a href="https://www.tidyverse.org/packages/">tidyverse</a>, <a href="https://cran.r-project.org/web/packages/nycflights13/index.html">nycflights13</a>, and <a href="https://cran.r-project.org/web/packages/RPostgreSQL/index.html">RPostgreSQL</a>.</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## -- Attaching packages ------------------------------------------------- tidyverse 1.2.1 --</code></pre>
<pre><code>## v ggplot2 3.0.0     v purrr   0.2.5
## v tibble  1.4.2     v dplyr   0.7.6
## v tidyr   0.8.1     v stringr 1.3.1
## v readr   1.1.1     v forcats 0.3.0</code></pre>
<pre><code>## -- Conflicts ---------------------------------------------------- tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(nycflights13)
library(RPostgreSQL)</code></pre>
<pre><code>## Loading required package: DBI</code></pre>
</div>
<div id="connecting-to-the-postgresql-database" class="section level2">
<h2>Connecting to the PostgreSQL database</h2>
<p>First we initialize the PostgreSQL and then connect to the database.</p>
<pre class="r"><code># load the PostgreSQL driver ---
drv &lt;- dbDriver(&quot;PostgreSQL&quot;)

# connection to the postgres database ---
con &lt;- dbConnect(drv, 
                 dbname = &quot;postgres&quot;,
                 host = &quot;localhost&quot;, 
                 port = 5432,
                 user = &quot;postgres&quot;, 
                 password = &quot;mynewpassword&quot;)</code></pre>
</div>
<div id="load-nyc-flights-data-to-the-data-base" class="section level2">
<h2>Load NYC flights data to the data base</h2>
<pre class="r"><code>dbWriteTable(conn = con, 
             name = &quot;airlines&quot;, 
             value = nycflights13::airlines)</code></pre>
<pre><code>## Warning in postgresqlWriteTable(conn, name, value, ...): table airlines
## exists in database: aborting assignTable</code></pre>
<pre><code>## [1] FALSE</code></pre>
<pre class="r"><code>dbWriteTable(conn = con, 
             name = &quot;airports&quot;, 
             value = nycflights13::airports)</code></pre>
<pre><code>## Warning in postgresqlWriteTable(conn, name, value, ...): table airports
## exists in database: aborting assignTable</code></pre>
<pre><code>## [1] FALSE</code></pre>
<pre class="r"><code>dbWriteTable(conn = con, 
             name = &quot;planes&quot;, 
             value = nycflights13::planes)</code></pre>
<pre><code>## Warning in postgresqlWriteTable(conn, name, value, ...): table planes
## exists in database: aborting assignTable</code></pre>
<pre><code>## [1] FALSE</code></pre>
<pre class="r"><code>dbWriteTable(conn = con, 
             name = &quot;weather&quot;, 
             value = nycflights13::weather)</code></pre>
<pre><code>## Warning in postgresqlWriteTable(conn, name, value, ...): table weather
## exists in database: aborting assignTable</code></pre>
<pre><code>## [1] FALSE</code></pre>
</div>
<div id="verify-databases-exist" class="section level2">
<h2>Verify databases exist</h2>
<pre class="r"><code>dbListTables(conn = con)</code></pre>
<pre><code>## [1] &quot;weather&quot;  &quot;airlines&quot; &quot;airports&quot; &quot;planes&quot;</code></pre>
</div>
</div>
