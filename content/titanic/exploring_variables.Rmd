---
title: "Exploring variables"
author: "Shannon Pileggi"
date: 2018-11-08
categories: ["R"]
tags: ["Titanic", "kaggle", "character", "exploratory data analysis"]
---

# Importing the data

To begin with, let's import the `train` data set as a [tibble](https://r4ds.had.co.nz/tibbles.html) using the `read_csv` function in the `tidyverse` package.

```{r, message = F}
library(tidyverse)
train <- read_csv("train.csv")
```


# Character variables

For a quick view of character variable values, use the `glimpse` function in combination with `select_if` and `is.character`, which allows you to restrict output to character variables only.  

```{r}
train %>% 
  select_if(is.character) %>% 
  glimpse()
```
Super, we can see 5 character variables that range in complexity.  Let's get a more thorough summary of these variables using the `skim` function in the `skimr` library.

```{r}
library(skimr)

train %>% 
  select_if(is.character) %>% 
  skim()
```

Here are some initial thoughts on the variables, listed in order of increasing complexity:

* `Sex` seems pretty clean - no missing values and only 2 unique values.  Woohoo! 
* `Embarked` only has 3 unique values but has 2 missing values - we might want to look into informed ways to fill in those missing values.
* `Name` has no missing values, but each entry is unique!  The character length ranges from 12 to 82 characters.
* `Ticket` has no missing values, but has 681 unique values ranging in length from 3 to 18 characters.
* `Cabin` has 687 missing values and 147 unique values, ranging in length from 1 to 15 characters.  If we want to work with this variable, it is going to take some work!

For the sake of completeness, let's also examine the unique values of `Sex` and `Embarked`.  The `count` function with the `sort = T` option allows us to quickly view frequency counts in order.

```{r}
train %>% 
  count(Sex, sort = T)
```

```{r}
train %>% 
  count(Embarked, sort = T)
```

The bottom line: `Embarked`, `Name`, `Ticket`, and `Cabin` all require some finesse for added value in modeling. 


#  Numeric variables

Let's take a quick look at some values of the remaining numeric variables, as well as quick summary.  

```{r}
train %>% 
  select_if(is.numeric) %>% 
  glimpse()
```

The `skim_with` function allows you to customize your `skim` output. Here, we are suppressing the histograms that are displayed by default because of [known issues](https://github.com/ropensci/skimr/issues/263) with displaying the spark graph.

```{r}
# suppress printing of histograms ----
skim_with(numeric = list(hist = NULL), 
          integer = list(hist = NULL))

train %>% 
  select_if(is.numeric) %>% 
  skim()
```

Some notes here:

* `Pclass` only takes on values of 1, 2, and 3, so we want to be sure to treat that as a factor in analysis.
* `Age` has 177 missing values, so we may want to look into imputation methods for these.
* `Fare` has a pretty extreme max value (`512.33`) relative to the 75th percentile (`31`) - this is something we might want to examine closer and keep in mind when modeling.  

Now that we have a solid overview of the variables in our data set, we are ready to dig deeper!
