---
title: "Exploring variables"
author: "Shannon Pileggi"
date: 2018-11-08
categories: ["R"]
tags: ["Titanic", "kaggle", "character", "exploratory data analysis"]
---



<div id="importing-the-data" class="section level1">
<h1>Importing the data</h1>
<p>To begin with, let’s import the <code>train</code> data set as a <a href="https://r4ds.had.co.nz/tibbles.html">tibble</a> using the <code>read_csv</code> function in the <code>tidyverse</code> package.</p>
<pre class="r"><code>library(tidyverse)
train &lt;- read_csv(&quot;train.csv&quot;)</code></pre>
</div>
<div id="character-variables" class="section level1">
<h1>Character variables</h1>
<p>For a quick view of character variable values, use the <code>glimpse</code> function in combination with <code>select_if</code> and <code>is.character</code>, which allows you to restrict output to character variables only.</p>
<pre class="r"><code>train %&gt;% 
  select_if(is.character) %&gt;% 
  glimpse()</code></pre>
<pre><code>## Observations: 891
## Variables: 5
## $ Name     &lt;chr&gt; &quot;Braund, Mr. Owen Harris&quot;, &quot;Cumings, Mrs. John Bradle...
## $ Sex      &lt;chr&gt; &quot;male&quot;, &quot;female&quot;, &quot;female&quot;, &quot;female&quot;, &quot;male&quot;, &quot;male&quot;,...
## $ Ticket   &lt;chr&gt; &quot;A/5 21171&quot;, &quot;PC 17599&quot;, &quot;STON/O2. 3101282&quot;, &quot;113803&quot;...
## $ Cabin    &lt;chr&gt; NA, &quot;C85&quot;, NA, &quot;C123&quot;, NA, NA, &quot;E46&quot;, NA, NA, NA, &quot;G6...
## $ Embarked &lt;chr&gt; &quot;S&quot;, &quot;C&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;Q&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;C&quot;, &quot;S&quot;...</code></pre>
<p>Super, we can see 5 character variables that range in complexity. Let’s get a more thorough summary of these variables using the <code>skim</code> function in the <code>skimr</code> library.</p>
<pre class="r"><code>library(skimr)

train %&gt;% 
  select_if(is.character) %&gt;% 
  skim()</code></pre>
<pre><code>## Skim summary statistics
##  n obs: 891 
##  n variables: 5 
## 
## -- Variable type:character ---------------------------------------------------------------
##  variable missing complete   n min max empty n_unique
##     Cabin     687      204 891   1  15     0      147
##  Embarked       2      889 891   1   1     0        3
##      Name       0      891 891  12  82     0      891
##       Sex       0      891 891   4   6     0        2
##    Ticket       0      891 891   3  18     0      681</code></pre>
<p>Here are some initial thoughts on the variables, listed in order of increasing complexity:</p>
<ul>
<li><code>Sex</code> seems pretty clean - no missing values and only 2 unique values. Woohoo!</li>
<li><code>Embarked</code> only has 3 unique values but has 2 missing values - we might want to look into informed ways to fill in those missing values.</li>
<li><code>Name</code> has no missing values, but each entry is unique! The character length ranges from 12 to 82 characters.</li>
<li><code>Ticket</code> has no missing values, but has 681 unique values ranging in length from 3 to 18 characters.</li>
<li><code>Cabin</code> has 687 missing values and 147 unique values, ranging in length from 1 to 15 characters. If we want to work with this variable, it is going to take some work!</li>
</ul>
<p>For the sake of completeness, let’s also examine the unique values of <code>Sex</code> and <code>Embarked</code>. The <code>count</code> function with the <code>sort = T</code> option allows us to quickly view frequency counts in order.</p>
<pre class="r"><code>train %&gt;% 
  count(Sex, sort = T)</code></pre>
<pre><code>## # A tibble: 2 x 2
##   Sex        n
##   &lt;chr&gt;  &lt;int&gt;
## 1 male     577
## 2 female   314</code></pre>
<pre class="r"><code>train %&gt;% 
  count(Embarked, sort = T)</code></pre>
<pre><code>## # A tibble: 4 x 2
##   Embarked     n
##   &lt;chr&gt;    &lt;int&gt;
## 1 S          644
## 2 C          168
## 3 Q           77
## 4 &lt;NA&gt;         2</code></pre>
<p>The bottom line: <code>Embarked</code>, <code>Name</code>, <code>Ticket</code>, and <code>Cabin</code> all require some finesse for added value in modeling.</p>
</div>
<div id="numeric-variables" class="section level1">
<h1>Numeric variables</h1>
<p>Let’s take a quick look at some values of the remaining numeric variables, as well as quick summary.</p>
<pre class="r"><code>train %&gt;% 
  select_if(is.numeric) %&gt;% 
  glimpse()</code></pre>
<pre><code>## Observations: 891
## Variables: 7
## $ PassengerId &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,...
## $ Survived    &lt;int&gt; 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0,...
## $ Pclass      &lt;int&gt; 3, 1, 3, 1, 3, 3, 1, 3, 3, 2, 3, 1, 3, 3, 3, 2, 3,...
## $ Age         &lt;dbl&gt; 22, 38, 26, 35, 35, NA, 54, 2, 27, 14, 4, 58, 20, ...
## $ SibSp       &lt;int&gt; 1, 1, 0, 1, 0, 0, 0, 3, 0, 1, 1, 0, 0, 1, 0, 0, 4,...
## $ Parch       &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 1, 0, 0, 5, 0, 0, 1,...
## $ Fare        &lt;dbl&gt; 7.2500, 71.2833, 7.9250, 53.1000, 8.0500, 8.4583, ...</code></pre>
<p>The <code>skim_with</code> function allows you to customize your <code>skim</code> output. Here, we are suppressing the histograms that are displayed by default because of <a href="https://github.com/ropensci/skimr/issues/263">known issues</a> with displaying the spark graph.</p>
<pre class="r"><code># suppress printing of histograms ----
skim_with(numeric = list(hist = NULL), 
          integer = list(hist = NULL))

train %&gt;% 
  select_if(is.numeric) %&gt;% 
  skim()</code></pre>
<pre><code>## Skim summary statistics
##  n obs: 891 
##  n variables: 7 
## 
## -- Variable type:integer -----------------------------------------------------------------
##     variable missing complete   n   mean     sd p0   p25 p50   p75 p100
##        Parch       0      891 891   0.38   0.81  0   0     0   0      6
##  PassengerId       0      891 891 446    257.35  1 223.5 446 668.5  891
##       Pclass       0      891 891   2.31   0.84  1   2     3   3      3
##        SibSp       0      891 891   0.52   1.1   0   0     0   1      8
##     Survived       0      891 891   0.38   0.49  0   0     0   1      1
## 
## -- Variable type:numeric -----------------------------------------------------------------
##  variable missing complete   n mean    sd   p0   p25   p50 p75   p100
##       Age     177      714 891 29.7 14.53 0.42 20.12 28     38  80   
##      Fare       0      891 891 32.2 49.69 0     7.91 14.45  31 512.33</code></pre>
<p>Some notes here:</p>
<ul>
<li><code>Pclass</code> only takes on values of 1, 2, and 3, so we want to be sure to treat that as a factor in analysis.</li>
<li><code>Age</code> has 177 missing values, so we may want to look into imputation methods for these.</li>
<li><code>Fare</code> has a pretty extreme max value (<code>512.33</code>) relative to the 75th percentile (<code>31</code>) - this is something we might want to examine closer and keep in mind when modeling.</li>
</ul>
<p>Now that we have a solid overview of the variables in our data set, we are ready to dig deeper!</p>
</div>
